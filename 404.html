<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Page Not Found - Redirecting...</title>
    <style>
        body { font-family: sans-serif; background-color: #1a1a1a; color: #ccc; padding: 20px; text-align: center; }
        p { margin-bottom: 15px; }
        a { color: #f97316; }
        .loading { font-size: 1.2em; font-weight: bold; }
    </style>
    <script>
        // IIFE (Immediately Invoked Function Expression) to avoid polluting global scope
        (function() {
            // Key to use for storing the path in sessionStorage
            const redirectKey = 'spaRedirectPath';

            // Get the full path including query parameters
            const path = location.pathname + location.search;

            // Store the path in sessionStorage
            // We use sessionStorage so it persists just for the next page load (index.html)
            sessionStorage.setItem(redirectKey, path);

            // Construct the redirect URL to the root index.html
            // GitHub Pages should correctly interpret '/index.html' relative to the site's base URL (e.g., /repo/index.html)
            const redirectUrl = '/index.html';

            // Perform the redirect
            console.log(`GitHub Pages 404: Redirecting from ${path} to ${redirectUrl} after storing path in sessionStorage ('${redirectKey}').`);
            location.replace(redirectUrl); // Use replace to avoid adding the 404 page to history
        })();
    </script>
</head>
<body>
    <p class="loading">If you are not redirected automatically, please click here:</p>
    <p><a id="manual-redirect-link" href="/index.html">Go to Home Page</a></p>

    <noscript>
        <p>This site requires JavaScript for routing. Please enable JavaScript or use the link above.</p>
    </noscript>

    <script>
        // Update the manual link just in case (though redirect should be faster)
        document.getElementById('manual-redirect-link').href = '/index.html';
    </script>
</body>
</html>
